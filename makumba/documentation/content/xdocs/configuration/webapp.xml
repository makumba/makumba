<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//MAKUMBA//DTD Documentation V2.0//EN" "document-v20-mak.dtd">
<document>
    <header>
        <title>Makumba web-app configuration</title>
    </header>
    <body>
        <p>This page explains how a web-app should be configured in order to work properly with Makumba.</p>
        <section>
            <title>Makumba controller filter mapping</title>
            <p>In order to work properly, the following filter should be mapped in <code>WEB-INF/web.xml</code>:</p>
                <source>
                    <![CDATA[ 
            <filter>
                <filter-name>makumba_controller</filter-name>
                <filter-class>org.makumba.controller.http.ControllerFilter</filter-class>
            </filter>
            
            <filter-mapping>
                <filter-name>makumba_controller</filter-name>
                <url-pattern>*.jsp</url-pattern>
            </filter-mapping>
            <filter-mapping>
                <filter-name>makumba_controller</filter-name>
                <url-pattern>*.jspx</url-pattern>
            </filter-mapping>
            <filter-mapping>
                <filter-name>makumba_controller</filter-name>
                <url-pattern>/mak-tools</url-pattern>
            </filter-mapping>
            <filter-mapping>
                <filter-name>makumba_controller</filter-name>
                <url-pattern>/mak-tools/*</url-pattern>
            </filter-mapping> ]]>
                </source>
            <p>The mappings are needed for the following reasons:</p>
            <ul>
                <li>*.jsp: to enable authentication/authorisation on JSP page access, and to enable form processing</li>
                <li>*.jspx: to enable the source-code viewer for JSP files</li>
                <li>/mak-tools/ and /mak-tools/*: to enable the various makumba tools, such as the MDD viewer.</li>
            </ul>
        </section>
    </body>
</document>
