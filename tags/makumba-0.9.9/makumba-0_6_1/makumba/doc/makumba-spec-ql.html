<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="author" content="makumba-dev group">
  <title>Makumba Specification</title>
  <link rel="stylesheet" type="text/css" media="all" href="main.css">
  <script type="text/javascript" src="main.js"></script>
</head>
<body>
<script type="text/javascript">
   makeNavBar("");
</script>
<h1>Makumba Specification</h1>

<table>
  <tr>
    <td valign="top"> <a href="makumba-spec.html" title="...writing MDDs"><b>[Data Definitions]</b></a>&nbsp; </td>
    <td valign="top"> <a href="makumba-spec-ql.html" title="...getting data from the database"><b>[Query Languages]</b></a>&nbsp; </td>
    <td valign="top"> 
      <b>[<span title="...viewing/editing data thru HTML pages">JSP tag library</span>:</b>
      <a href="makumba-spec-taglib.html" title="...controller &amp; response"><b>Intro</b></a>
      | <a href="makumba-spec-taglib-list.html" title="...viewing data thru HTML pages"><b>Listing</b></a>
      | <a href="makumba-spec-taglib-forms.html" title="...editing data thru HTML pages"><b>Forms</b></a>]
    </td>     
    <td valign="top"> <a href="makumba-spec-bl.html" title="...adding logic to basic operations"><b>[Business Logics]</b></a>&nbsp; </td>
    <td valign="top"> <a href="makumba-spec-summary.html" title="...Presentation and internal representation principles"><b>[Summary]</b></a> </td>
  </tr>
</table>


<h2><a name="OQL">Query languages</a></h2>
<table widht=100%>
<tr>
  <td valign="top">
    <div class="navbarPage">
    <ul class="navbarPage">
      <li><a href="#OQL">OQL</a></li>
      <br/>
      <li><a href="#HQL">Hibernate HQL</a></li>
    </ul>
    </div>
  </td>
  <td>

<h3 id="OQ"L>OQL</h3>
<p> The database can be interrogated using the following language ( []
means optional, {} means any number of repetitions). OQL is similar to
SQL, a specification can be found at <a href="http://www.odmg.org">http://www.odmg.org</a>
(or check this <a href="http://www.cis.upenn.edu/%7Ecis550/oql.pdf">PDF</a>).
Makumba recognizes a subset of OQL at the moment, which it translates
to the <a href="SQL-drivers.html">host SQL</a> when necessary. </p>
<pre class="example"><b>SELECT</b> expression [[<b>AS</b>] label] {, expression [[<b>AS</b>] label] }<br><b>FROM</b> {type [<b>AS</b>] label | label.field{.field} [<b>AS</b>] label }<br>[   <b>WHERE</b> expression<br>    [    <b>GROUP BY</b> expression {,expression}<br>        [  <b>HAVING</b> expression {,expression}  ]<br>    ]<br>]<br>[<b>ORDER BY</b> expression {,expression} [(<b>ASC</b>|<b>DESC</b>)] ]<br></pre>
<p>
Notations like <code>label.field{.field}</code> only allow "<code>field</code>"
to be of pointer
type in <b><i>expression</i></b> and set type in <b>FROM</b>.
In expressions, also <code>label.ptr{.ptr}.simplefield</code> is
valid.
</p>
<!-- FIXME (fred, 2003-10-14):

     ? add some warning about expressions (e.g. in WHERE or ORDERBY) across

       nullable pointers

       = result is not having the records with null value in the list)

-->
<p>If a label, representing a type, appears alone in an expression,
a default field will be added. The default field depends on the type of
the label:
</p>
<ul>
  <li>for set XXX types (sets of foreign objects), the label denotes
the pointer to the set member</li>
  <li>for set int { } and set char { } types, the label denotes the set
member (i.e. and int or a string)</li>
  <li>for all other types, the label denotes the pointer to that object</li>
</ul>
<div class="note"> In OQL, NULL values are named 'nil', example
<pre class="example">ms.account_active=1 OR ms.account_active=nil<br></pre>
</div>
<div class="note futfeat"> In the future, the MDDs should use 'nil'
instead of null, e.g. nickName = not nil char[20]
</div>

<h3 id="HQL">Hibernate Query Language - HQL</h3>
<div class="note futfeat"> 
<p>In the future, makumba will integrate <a href="http://www.hibernate.org">Hibernate</a>.<br/>
Doing so, you will be able to take full advantage of hibernate's query language <a href="http://www.hibernate.org/89.html">HQL</a>.
  </td>
</tr>
</table>

<script type="text/javascript">
   makeFooter("$Id$");
</script>
</body>
</html>
