this is experimental code for doing the function inlining at pass 2. 